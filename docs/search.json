[{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting Started with the didhetero Package","text":"didhetero package provides tools construct doubly robust uniform confidence bands group-time conditional average treatment effect (CATT) function given pre-treatment continuous covariate interest variety useful summary parameters staggered difference--differences () setup Callaway Sant‚ÄôAnna (2021). package useful understanding heterogeneity treatment effects respect groups, periods, covariate values staggered setting. uniform inference methods developed Imai, Qin, Yanagi (2025) ‚ÄúDoubly Robust Uniform Confidence Bands Group-Time Conditional Average Treatment Effects Difference--Differences‚Äù.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Getting Started with the didhetero Package","text":"Get package GitHub:","code":"# install.packages(\"devtools\") # if needed devtools::install_github(\"tkhdyanagi/didhetero\", build_vignettes = TRUE)"},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"package-functions","dir":"Articles","previous_headings":"","what":"Package Functions","title":"Getting Started with the didhetero Package","text":"didhetero package provides following functions. catt_gt_continuous(): computes doubly robust estimates uniform confidence bands CATT function given continuous pre-treatment covariate interest. aggte_continuous(): computes doubly robust estimates uniform confidence bands summary parameters aggregate CATTs.","code":""},{"path":[]},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"arguments","dir":"Articles","previous_headings":"The catt_gt_continuous() Function","what":"Arguments","title":"Getting Started with the didhetero Package","text":"catt_gt_continuous() function following arguments. yname: name outcome. tname: name time periods. idname: name cross-sectional IDs. gname: name groups. ‚ÄúG = 0‚Äù indicates never treated group. zname: name scalar continuous covariate group-time conditional average treatment effects estimated xformla: formula covariates include model. form ~ X1 + X2. xformla include zname covariate. data: name data.frame contains balanced panel data. zeval: vector evaluation points z. gteval: vector matrix evaluation points g t. vector, first second elements indicate g t, respectively. matrix, first second columns indicate g‚Äôs t‚Äôs, respectively. Default NULL gteval constructed automatically. pretrend: Boolean whether perform uniform inference CATT pre-treatment periods (.e., pre-trends framework). parameter applicable gteval NULL. Default FALSE. control_group: units use control group. Options ‚Äúnevertreated‚Äù ‚Äúnotyettreated‚Äù. Default ‚Äúnotyettreated‚Äù. anticipation: number time periods participating treatment units can anticipate participating treatment therefore can affect untreated potential outcomes. Default 0. alp: significance level. Default 0.05. bstrap: Boolean whether perform weighted bootstrapping. Default TRUE. bstrap FALSE, analytical critical value used. biters: number bootstrap iterations. parameter applicable bstrap = TRUE. Default 1000. porder: polynomial order used second- third-stage estimation. Options 1 2, correspond local linear quadratic regressions, respectively. Default 2. kernel: kernel function used local polynomial regressions. Options ‚Äúgau‚Äù Gaussian kernel ‚Äúepa‚Äù Epanechnikov kernel. Default ‚Äúgau‚Äù. bwselect: bandwidth selection method used second- third-stage estimation. Options ‚ÄúIMSE1‚Äù, ‚ÄúIMSE2‚Äù, ‚ÄúUS1‚Äù, ‚Äúmanual‚Äù. ‚ÄúIMSE1‚Äù ‚ÄúIMSE2‚Äù mean IMSE-optimal bandwidths local linear quadratic regressions, respectively. ‚ÄúUS1‚Äù means rule--thumb undersmoothing bandwidth local linear regression. ‚Äúmanual‚Äù means manual selection bw specified case. Default ‚ÄúIMSE1‚Äù, recommended use porder = 2. bw: bandwidth used second- third-stage estimation. Default NULL bandwidth chosen automatically. parameter applicable bwselect ‚Äúmanual‚Äù, scalar vector whose length equals number rows gteval. uniformall: Boolean whether perform uniform inference (g, t, z). Default TRUE, uniform inference (g, t, z) performed. FALSE, uniform inference z performed.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"returns","dir":"Articles","previous_headings":"The catt_gt_continuous() Function","what":"Returns","title":"Getting Started with the didhetero Package","text":"catt_gt_continuous() function returns list contains following elements. g: group. t: period. z: covariate value. est: doubly robust estimate CATT. se: standard error. ci1_lower: lower bound analytical uniform confidence band. ci1_upper: upper bound analytical uniform confidence band. ci2_lower: lower bound bootstrap uniform confidence band. ci2_upper: upper bound bootstrap uniform confidence band. bw: bandwidth. Figure1: list contains ggplot elements analytical uniform confidence bands. Figure2: list contains ggplot elements bootstrap uniform confidence bands.","code":""},{"path":[]},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"arguments-1","dir":"Articles","previous_headings":"The aggte_continuous() function","what":"Arguments","title":"Getting Started with the didhetero Package","text":"aggte_continuous() function following arguments. output: output catt_gt_continuous function. , several arguments uniform inference results CATT catt_gt_continuous function can used function. particular, following passed output: xformla, zeval, pretrend, control_group, anticipation, alp, kernel. type type summary parameter interest. Options ‚Äúsimple‚Äù, ‚Äúdynamic‚Äù, ‚Äúgroup‚Äù, ‚Äúcalendar‚Äù. Default ‚Äúdynamic‚Äù. eval: vector evaluation point specific chosen summary parameter. type set ‚Äúdynamic‚Äù, evaluation point e. type set ‚Äúgroup‚Äù, evaluation point g‚Äô. type set ‚Äúcalendar‚Äù, evaluation point t‚Äô. type set ‚Äúsimple‚Äù, evaluation point specific summary parameter, eval NULL. Default NULL eval constructed automatically. bstrap: Boolean whether perform multiplier bootstrapping. Default TRUE. bstrap FALSE, analytical critical value used. biters: number bootstrap iterations. parameter applicable bstrap TRUE. Default 1000. porder: polynomial order used second- third-stage estimation. Options 1 2, correspond local linear quadratic regressions, respectively. Default 2. bwselect: bandwidth selection method used aggregation. Options ‚ÄúIMSE1‚Äù, ‚ÄúIMSE2‚Äù, ‚ÄúUS1‚Äù, ‚Äúmanual‚Äù. ‚ÄúIMSE1‚Äù ‚ÄúIMSE2‚Äù mean IMSE-optimal bandwidths local linear quadratic regressions, respectively. ‚ÄúUS1‚Äù means rule--thumb undersmoothing local linear regression. ‚Äúmanual‚Äù means manual selection bw specified case. Default ‚ÄúIMSE1‚Äù, recommended use porder = 2. bw: bandwidth used aggregation. Default NULL bandwidth chosen automatically. parameter applicable bwselect ‚Äúmanual‚Äù, scalar vector whose length equals number rows eval. uniformall: Boolean whether perform uniform inference eval z. Default TRUE uniform inference eval z performed. FALSE, uniform inference z performed.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"returns-1","dir":"Articles","previous_headings":"The aggte_continuous() function","what":"Returns","title":"Getting Started with the didhetero Package","text":"aggte_continuous() function returns list contains following elements. eval: evaluation point specific chosen summary parameter. z: covariate value. est: doubly robust estimate chosen summary parameter. se: standard error. ci1_lower: lower bound analytical uniform confidence band. ci1_upper: upper bound analytical uniform confidence band. ci2_lower: lower bound bootstrap uniform confidence band. ci2_upper: upper bound bootstrap uniform confidence band. bw: bandwidth. Figure1: list contains ggplot elements analytical uniform confidence bands. Figure2: list contains ggplot elements bootstrap uniform confidence bands.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"examples","dir":"Articles","previous_headings":"","what":"Examples","title":"Getting Started with the didhetero Package","text":"begin generating artificial data using datageneration() function. can see variables‚Äô names dataset : can run catt_gt_continuous() function compute doubly robust estimates uniform confidence bands CATT function given continuous covariate ZZ: estimation uniform inference results : figure analytical uniform confidence band g=2g = 2 t=2t = 2 : figure bootstrap uniform confidence band g=2g = 2 t=2t = 2 : can run aggte_continuous() function compute doubly robust estimates uniform confidence bands event-study-type parameter given continuous covariate ZZ: estimation uniform inference results : figure analytical uniform confidence band e=0e = 0 : figure bootstrap Uuniform confidence band e=0e = 0 :","code":"# Load the package library(didhetero)  # Generate artificial data set.seed(1) data <- datageneration(n = 500, tau = 4) head(data) #>   id period           Y G          Z #> 1  1      1  0.98412124 2 -0.6264538 #> 2  1      2  1.77999550 2 -0.6264538 #> 3  1      3 -0.02004389 2 -0.6264538 #> 4  1      4  6.43951734 2 -0.6264538 #> 5  2      1  3.37331543 2  0.1836433 #> 6  2      2  5.59684221 2  0.1836433 output1 <- catt_gt_continuous(   yname = \"Y\",   tname = \"period\",   idname = \"id\",   gname = \"G\",   zname = \"Z\",   xformla = ~ Z,   data = data,   zeval = seq(-1, 1, by = 0.1),   gteval = NULL,   pretrend = FALSE,   control_group = \"notyettreated\",   anticipation = 0,   alp = 0.05,   bstrap = TRUE,   biters = 1000,   porder = 2,   kernel = \"gau\",   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE ) head(output1$Estimate) #>   g t    z       est        se   ci1_lower ci1_upper  ci2_lower ci2_upper        bw #> 1 2 2 -1.0 1.0264796 0.4222882 -0.09707295  2.150032 -0.9308918  2.983851 0.2547594 #> 2 2 2 -0.9 0.7652004 0.3980792 -0.29394090  1.824342 -1.0799584  2.610359 0.2547594 #> 3 2 2 -0.8 0.5273424 0.3785987 -0.47996845  1.534653 -1.2275212  2.282206 0.2547594 #> 4 2 2 -0.7 0.3192217 0.3636817 -0.64840072  1.286844 -1.3664996  2.004943 0.2547594 #> 5 2 2 -0.6 0.1813663 0.3498634 -0.74949043  1.112223 -1.4403045  1.803037 0.2547594 #> 6 2 2 -0.5 0.1441067 0.3353516 -0.74813968  1.036353 -1.4102999  1.698513 0.2547594 output1$Figure1$g2_t2 output1$Figure2$g2_t2 output2 <- aggte_continuous(   output = output1,   type = \"dynamic\",   eval = NULL,   bstrap = TRUE,   biters = 1000,   porder = 2,   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE ) head(output2$Estimate) #>   eval    z       est        se  ci1_lower ci1_upper   ci2_lower ci2_upper        bw #> 1    0 -1.0 1.3522719 0.2938703  0.5590099  2.145534  0.47091346  2.233630 0.2296415 #> 2    0 -0.9 1.0763768 0.2923213  0.2872961  1.865457  0.19966408  1.953089 0.2296415 #> 3    0 -0.8 0.7894387 0.2849603  0.0202280  1.558649 -0.06519735  1.644075 0.2296415 #> 4    0 -0.7 0.5326729 0.2758289 -0.2118887  1.277235 -0.29457664  1.359922 0.2296415 #> 5    0 -0.6 0.3607236 0.2673598 -0.3609771  1.082424 -0.44112621  1.162573 0.2296415 #> 6    0 -0.5 0.3072095 0.2575102 -0.3879036  1.002323 -0.46510000  1.079519 0.2296415 output2$Figure1$eval0 output2$Figure2$eval0"},{"path":"https://tkhdyanagi.github.io/didhetero/articles/didhetero.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Getting Started with the didhetero Package","text":"Callaway, B., & Sant‚ÄôAnna, P. H. (2021). Difference--differences multiple time periods. Journal Econometrics, 225(2), 200-230. Link Imai, S., Qin, L., & Yanagi, T. (2025). Doubly Robust Uniform Confidence Bands Group-Time Conditional Average Treatment Effects Difference--Differences. arXiv preprint arXiv:2305.02185. Link","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/overview.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Overview of the didhetero Methods","text":"vignette provides overview estimation uniform inference methods can implemented using didhetero package. sake brevity, omit many details methods , can found Imai, Qin, Yanagi (2025).","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/overview.html","id":"staggered-did-setup","dir":"Articles","previous_headings":"","what":"Staggered DiD Setup","title":"Overview of the didhetero Methods","text":"consider essentially staggered difference--differences () setup Callaway Sant‚ÄôAnna (2021). balanced panel data observe following variables units =1,‚Ä¶,ni = 1, \\dots, n periods t=1,‚Ä¶,ùíØt = 1, \\dots, \\mathcal{T}. outcome variable Yi,tY_{,t}. binary treatment Di,tD_{,t} Di,1=0D_{,1} = 0 Di,t‚àí1=1D_{,t-1} = 1 implies Di,t=1D_{,t} = 1 t=3,‚Ä¶,ùíØt = 3, \\dots, \\mathcal{T}. ‚Äúgroup‚Äù Gi=min{t:Di,t=1}G_i = \\min\\{ t : D_{,t} = 1 \\} Di,t=1D_{,t} = 1 tt, Gi=0G_i = 0 otherwise. kk-dimensional vector pre-treatment covariates XiX_i includes scalar continuous covariate ZiZ_i element particular interest.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/overview.html","id":"target-parameters","dir":"Articles","previous_headings":"","what":"Target Parameters","title":"Overview of the didhetero Methods","text":"examine heterogeneity treatment effects respect groups, periods, continuous covariate values, consider two types target parameters: group-time conditional average treatment effect (CATT) given Z=zZ = z. summary parameters aggregate CATTs estimable weighting functions. CATT CATTg,t(z)=ùîº[Yi,t(g)‚àíYi,t(0)‚à£Gi,g=1,Zi=z],\\begin{equation}     {\\text{CATT}}_{g,t}(z)     = \\mathbb{E} [ Y_{,t}(g) - Y_{,t}(0) \\mid G_{,g} = 1, Z_i = z ], \\end{equation} Yi,t(g)Y_{,t}(g) Yi,t(0)Y_{,t}(0) denote potential outcomes given Gi=gG_i = g Gi=0G_i = 0, respectively, zz value ZiZ_i. Estimating CATTg,t(z){\\text{CATT}}_{g,t}(z) (g,t,z)(g, t, z) helpful understanding treatment effect heterogeneity respect group gg, calendar time tt, covariate value zz. aggregated parameter Œ∏(z)=‚àëg‚ààùí¢‚àët=2ùíØwg,t(z)‚ãÖCATTg,t(z),\\begin{equation}     \\theta(z)      = \\sum_{g \\\\mathcal{G}} \\sum_{t=2}^{\\mathcal{T}} w_{g,t}(z) \\cdot \\text{CATT}_{g,t}(z), \\end{equation} ùí¢\\mathcal{G} denotes set realized treatment timings wg,t(z)w_{g,t}(z) estimable weighting function determines causal interpretation aggregated parameter. Examples include: event-study-type conditional average treatment effect Œ∏es(e,z)\\theta_{\\text{es}}(e, z). group-specific conditional average treatment effect Œ∏sel(g,z)\\theta_{\\text{sel}}(g, z). calendar-time conditional average treatment effect Œ∏c(t,z)\\theta_{\\text{c}}(t, z). simple weighted conditional average treatment effect Œ∏WO(z)\\theta_{\\text{W}}^{\\text{O}}(z).","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/overview.html","id":"doubly-robust-identification-estimation-and-uniform-inference","dir":"Articles","previous_headings":"","what":"Doubly Robust Identification, Estimation, and Uniform Inference","title":"Overview of the didhetero Methods","text":"can show CATTg,t(z)\\text{CATT}_{g,t}(z) identified conditional doubly robust (DR) estimand DRg,t(z)\\text{DR}_{g,t}(z), conditional counterpart DR estimand Callaway Sant‚ÄôAnna (2021). identification result serves building block estimation uniform inference CATT aggregated parameter. perform uniform inference CATTg,t(z)\\text{CATT}_{g,t}(z) set (g,t,z)(g, t, z), can construct (1‚àíŒ±)(1 - \\alpha) uniform confidence band CATTg,t(z)\\text{CATT}_{g,t}(z) set (g,t,z)(g, t, z) family intervals, denoted ùíû={ùíûg,t(z)}\\mathcal{C} = \\{ \\mathcal{C}_{g,t}(z) \\} ùíûg,t(z)=[DRÃÇg,t(z)‚àíc(1‚àíŒ±)‚ãÖSEÃÇg,t(z),DRÃÇg,t(z)+c(1‚àíŒ±)‚ãÖSEÃÇg,t(z)],\\begin{equation}     \\mathcal{C}_{g,t}(z)     =     \\left[      \\widehat{\\text{DR}}_{g,t}(z) - c(1 - \\alpha) \\cdot \\widehat{\\text{SE}}_{g,t}(z),     \\qquad      \\widehat{\\text{DR}}_{g,t}(z) + c(1 - \\alpha) \\cdot \\widehat{\\text{SE}}_{g,t}(z)     \\right], \\end{equation} DRÃÇg,t(z)\\widehat{\\text{DR}}_{g,t}(z) three-step estimator computed certain parametric estimation procedures nonparametric local polynomial regressions, SEÃÇg,t(z)\\widehat{\\text{SE}}_{g,t}(z) pointwise standard error, c(1‚àíŒ±)c(1 - \\alpha) uniform critical value obtained analytical method weighted bootstrapping. perform uniform inference aggregated parameter, can construct (1‚àíŒ±)(1 - \\alpha) uniform confidence band Œ∏(z)\\theta(z) set zz variable specific summary parameter interest (e.g., treatment exposure time ee) family intervals, denoted ùíûŒ∏={ùíûŒ∏(z)}\\mathcal{C}_{\\theta} = \\{ \\mathcal{C}_{\\theta}(z) \\} ùíûŒ∏(z)=[Œ∏ÃÇ(z)‚àícŒ∏(1‚àíŒ±)‚ãÖSEÃÇŒ∏(z),Œ∏ÃÇ(z)+cŒ∏(1‚àíŒ±)‚ãÖSEÃÇŒ∏(z)],\\begin{equation}     \\mathcal{C}_{\\theta}(z)     = \\left[ \\widehat{\\theta}(z) - c_{\\theta}(1 - \\alpha) \\cdot \\widehat{\\text{SE}}_{\\theta}(z), \\quad \\widehat{\\theta}(z) + c_{\\theta}(1 - \\alpha) \\cdot \\widehat{\\text{SE}}_{\\theta}(z) \\right], \\end{equation} Œ∏ÃÇ(z)\\widehat{\\theta}(z) estimator obtained empirical analogue Œ∏(z)\\theta(z), SEÃÇŒ∏(z)\\widehat{\\text{SE}}_{\\theta}(z) pointwise standard error, cŒ∏(1‚àíŒ±)c_{\\theta}(1 - \\alpha) uniform critical value via analytical method multiplier bootstrapping. Importantly, ensure validity uniform inference, critical value c(1‚àíŒ±)c(1 - \\alpha) must depend (g,t,z)(g, t, z) larger standard Wald-type pointwise critical value (.e., (1‚àíŒ±/2)(1 - \\alpha/2) quantile standard normal distribution). Similarly, uniform critical value cŒ∏(1‚àíŒ±)c_{\\theta}(1 - \\alpha) depend zz variable specific summary parameter interest (e.g., treatment exposure time ee) larger standard Wald-type pointwise critical value.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/overview.html","id":"recommendations","dir":"Articles","previous_headings":"","what":"Recommendations","title":"Overview of the didhetero Methods","text":"constructing uniformly valid critical value, bootstrap work better analytical method. choice local polynomial order, recommended default p = 2. bandwidth, recommend different choices depending local polynomial order. p = 2, recommended default use IMSE-optimal bandwidth local linear regression (bwselect = \"IMSE1\"). p = 1, recommended default use rule--thumb undersmoothing local linear regression (bwselect = \"US1\"). need make bias arising kernel smoothing asymptotically negligible justify uniform confidence bands. view, bwselect = \"IMSE2\" recommended. Although checking heterogeneity pre-trends useful assessing credibility identifying assumptions, may widen confidence intervals post-treatment periods. view, set pretrend = FALSE default. examine heterogeneity key variables covariate values, recommended default uniformall = TRUE.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/articles/overview.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Overview of the didhetero Methods","text":"Callaway, B., & Sant‚ÄôAnna, P. H. (2021). Difference--differences multiple time periods. Journal Econometrics, 225(2), 200-230. Link Imai, S., Qin, L., & Yanagi, T. (2025). Doubly Robust Uniform Confidence Bands Group-Time Conditional Average Treatment Effects Difference--Differences. arXiv preprint arXiv:2305.02185. Link","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Shunsuke Imai. Author, copyright holder. Lei Qin. Author, copyright holder. Takahide Yanagi. Author, maintainer, copyright holder.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Imai S, Qin L, Yanagi T (2025). ‚ÄúDoubly Robust Uniform Confidence Bands Group-Time Conditional Average Treatment Effects Difference--Differences.‚Äù doi:10.48550/arXiv.2305.02185, https://doi.org/10.48550/arXiv.2305.02185. Imai S, Qin L, Yanagi T (2025). ‚Äúdidhetero: Treatment Effect Heterogeneity Staggered Difference--Differences.‚Äù https://tkhdyanagi.github.io/didhetero/.","code":"@Misc{,   title = {Doubly Robust Uniform Confidence Bands for Group-Time Conditional Average Treatment Effects in Difference-in-Differences},   author = {Shunsuke Imai and Lei Qin and Takahide Yanagi},   url = {https://doi.org/10.48550/arXiv.2305.02185},   doi = {10.48550/arXiv.2305.02185},   publisher = {arXiv},   year = {2025}, } @Misc{,   title = {didhetero: Treatment Effect Heterogeneity in Staggered Difference-in-Differences},   author = {Shunsuke Imai and Lei Qin and Takahide Yanagi},   url = {https://tkhdyanagi.github.io/didhetero/},   year = {2025}, }"},{"path":"https://tkhdyanagi.github.io/didhetero/index.html","id":"didhetero-treatment-effect-heterogeneity-in-staggered-difference-in-differences","dir":"","previous_headings":"","what":"Treatment Effect Heterogeneity in Staggered Difference-in-Differences","title":"Treatment Effect Heterogeneity in Staggered Difference-in-Differences","text":"didhetero package provides tools construct doubly robust uniform confidence bands (UCB) group-time conditional average treatment effect (CATT) function given pre-treatment continuous covariate interest variety useful summary parameters staggered difference--differences setup Callaway Sant‚ÄôAnna (2021). package useful understanding heterogeneity treatment effects respect groups, periods, covariate values staggered setting. uniform inference methods developed Imai, Qin, Yanagi (2025) ‚ÄúDoubly Robust Uniform Confidence Bands Group-Time Conditional Average Treatment Effects Difference--Differences‚Äù.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Treatment Effect Heterogeneity in Staggered Difference-in-Differences","text":"Get package GitHub:","code":"# install.packages(\"devtools\") # if needed devtools::install_github(\"tkhdyanagi/didhetero\", build_vignettes = TRUE)"},{"path":"https://tkhdyanagi.github.io/didhetero/index.html","id":"vignette","dir":"","previous_headings":"","what":"Vignette","title":"Treatment Effect Heterogeneity in Staggered Difference-in-Differences","text":"details, see package vignette :","code":"# Getting Started with the didhetero Package vignette(\"didhetero\")"},{"path":"https://tkhdyanagi.github.io/didhetero/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Treatment Effect Heterogeneity in Staggered Difference-in-Differences","text":"Callaway, B., & Sant‚ÄôAnna, P. H. (2021). Difference--differences multiple time periods. Journal Econometrics, 225(2), 200-230. Link Imai, S., Qin, L., & Yanagi, T. (2025). Doubly Robust Uniform Confidence Bands Group-Time Conditional Average Treatment Effects Difference--Differences. arXiv preprint arXiv:2305.02185. Link","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 didhetero authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/aggte_continuous.html","id":null,"dir":"Reference","previous_headings":"","what":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","title":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","text":"`aggte_continuous` computes doubly robust estimates uniform confidence bands summary parameters aggregate group-time conditional average treatment effects (CATT) given continuous pre-treatment covariate staggered difference--differences setup Callaway Sant'Anna (2021) balanced panel data. See Imai, Qin, Yanagi (2025) details.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/aggte_continuous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","text":"","code":"aggte_continuous(   output,   type = \"dynamic\",   eval = NULL,   bstrap = TRUE,   biters = 1000,   porder = 2,   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE )"},{"path":"https://tkhdyanagi.github.io/didhetero/reference/aggte_continuous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","text":"output output `catt_gt_continuous` function. , several arguments uniform inference results CATT `catt_gt_continuous` function can used function. particular, following passed output: xformla, zeval, pretrend, control_group, anticipation, alp, kernel. type type summary parameter interest. Options \"simple\", \"dynamic\", \"group\", \"calendar\". Default \"dynamic\". eval vector evaluation point specific chosen summary parameter. type set \"dynamic\", evaluation point e. type set \"group\", evaluation point g'. type set \"calendar\", evaluation point t'. type set \"simple\", evaluation point specific summary parameter, eval `NULL`. Default `NULL` eval constructed automatically. bstrap Boolean whether perform multiplier bootstrapping. Default `TRUE`. bstrap `FALSE`, analytical critical value used. biters number bootstrap iterations. parameter applicable `bstrap = TRUE`. Default 1000. porder polynomial order used second- third-stage estimation. Options 1 2, correspond local linear quadratic regressions, respectively. Default 2. bwselect bandwidth selection method used aggregation. Options \"IMSE1\", \"IMSE2\", \"US1\", \"manual\". \"IMSE1\" \"IMSE2\" mean IMSE-optimal bandwidths local linear quadratic regressions, respectively. \"US1\" means rule--thumb undersmoothing local linear regression. \"manual\" means manual selection bw specified case. Default \"IMSE1\", recommended use `porder = 2`. bw bandwidth used aggregation. Default `NULL` bandwidth chosen automatically. parameter applicable bwselect \"manual\", scalar vector whose length equals number rows eval. uniformall Boolean whether perform uniform inference eval z. Default `TRUE` uniform inference eval z performed. `FALSE`, uniform inference z performed.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/aggte_continuous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","text":"list contains following elements. Estimate data.frame contains following elements.  eval: evaluation point specific chosen summary parameter.  z: covariate value.  est: doubly robust estimate chosen summary parameter.  se: standard error.  ci1_lower: lower bound analytical UCB.  ci1_upper: upper bound analytical UCB.  ci2_lower: lower bound bootstrap UCB.  ci2_upper: upper bound bootstrap UCB.  bw: bandwidth. Figure1 list contains ggplot elements analytical UCB Figure2 list contains ggplot elements bootstrap UCB","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/aggte_continuous.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","text":"Callaway, B., & Sant‚ÄôAnna, P. H. (2021). Difference--differences multiple time periods. Journal Econometrics, 225(2), 200-230. Imai, S., Qin, L., & Yanagi, T. (2025). Doubly robust uniform confidence bands group-time conditional average treatment effects difference--differences. arXiv preprint arXiv:2305.02185.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/aggte_continuous.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Uniform Inference for Summary Parameters that aggregate CATTs ‚Äî aggte_continuous","text":"","code":"if (FALSE) { # \\dontrun{  data <- datageneration(   n = 500,   tau = 4,   continuous = TRUE )  output1 <- catt_gt_continuous(   yname = \"Y\",   tname = \"period\",   idname = \"id\",   gname = \"G\",   zname = \"Z\",   xformla = ~ Z,   data = data,   zeval = seq(-1, 1, by = 0.1),   gteval = NULL,   pretrend = FALSE,   control_group = \"notyettreated\",   anticipation = 0,   alp = 0.05,   bstrap = TRUE,   biters = 1000,   porder = 2,   kernel = \"gau\",   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE )  output2 <- aggte_continuous(   output = output1,   type = \"dynamic\",   eval = NULL,   bstrap = TRUE,   biters = 1000,   porder = 2,   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE )  } # }"},{"path":"https://tkhdyanagi.github.io/didhetero/reference/catt_gt_continuous.html","id":null,"dir":"Reference","previous_headings":"","what":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","title":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","text":"`catt_gt_continuous` computes doubly robust estimates uniform confidence bands group-time conditional average treatment effect (CATT) function given continuous pre-treatment covariate staggered difference--differences setup Callaway Sant'Anna (2021) balanced panel data. See Imai, Qin, Yanagi (2025) details.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/catt_gt_continuous.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","text":"","code":"catt_gt_continuous(   yname,   tname,   idname,   gname,   zname,   xformla,   data,   zeval,   gteval = NULL,   pretrend = FALSE,   control_group = \"notyettreated\",   anticipation = 0,   alp = 0.05,   bstrap = TRUE,   biters = 1000,   porder = 2,   kernel = \"gau\",   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE )"},{"path":"https://tkhdyanagi.github.io/didhetero/reference/catt_gt_continuous.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","text":"yname name outcome tname name time periods idname name cross-sectional IDs gname name groups. \"G = 0\" indicates never treated group. zname name scalar continuous covariate group-time conditional average treatment effects estimated xformla formula covariates include model. form `~ X1 + X2`. `xformla` include `zname` covariate. data name data.frame contains balanced panel data zeval vector evaluation points z gteval vector matrix evaluation points g t. vector, first second elements indicate g t, respectively. matrix, first second columns indicate g's t's, respectively. Default `NULL` `gteval` constructed automatically. pretrend Boolean whether perform uniform inference CATT pre-treatment periods (.e., conditional pre-trends). parameter applicable `gteval = NULL`. Default `FALSE`. control_group units use control group. Options \"nevertreated\" \"notyettreated\". Default \"notyettreated\". anticipation number time periods participating treatment units can anticipate participating treatment therefore can affect untreated potential outcomes. Default 0. alp significance level. Default 0.05. bstrap Boolean whether perform weighted bootstrapping. Default `TRUE`. bstrap `FALSE`, analytical critical value used. biters number bootstrap iterations. parameter applicable bstrap `TRUE`. Default 1000. porder polynomial order used second- third-stage estimation. Options 1 2, correspond local linear quadratic regressions, respectively. Default 2. kernel kernel function used local polynomial regressions. Options \"gau\" Gaussian kernel \"epa\" Epanechnikov kernel. Default \"gau\". bwselect bandwidth selection method used second- third-stage estimation. Options \"IMSE1\", \"IMSE2\", \"US1\", \"manual\". \"IMSE1\" \"IMSE2\" mean IMSE-optimal bandwidths local linear quadratic regressions, respectively. \"US1\" means rule--thumb undersmoothing bandwidth local linear regression. \"manual\" means manual selection bw specified case. Default \"IMSE1\", recommended use `porder = 2`. bw bandwidth used second- third-stage estimation. Default `NULL` bandwidth chosen automatically. parameter applicable bwselect \"manual\", scalar vector whose length equals number rows gteval. uniformall Boolean whether perform uniform inference (g, t, z). Default `TRUE`, uniform inference (g, t, z) performed. `FALSE`, uniform inference z performed.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/catt_gt_continuous.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","text":"list contains following elements. Estimate data.frame contains following elements.  g: group.  t: period.  z: covariate value.  est: doubly robust estimate CATT.  se: standard error.  ci1_lower: lower bound analytical UCB.  ci1_upper: upper bound analytical UCB.  ci2_lower: lower bound bootstrap UCB.  ci2_upper: upper bound bootstrap UCB.  bw: bandwidth. Figure1 list contains ggplot elements analytical UCB Figure2 list contains ggplot elements bootstrap UCB","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/catt_gt_continuous.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","text":"Callaway, B., & Sant‚ÄôAnna, P. H. (2021). Difference--differences multiple time periods. Journal Econometrics, 225(2), 200-230. Imai, S., Qin, L., & Yanagi, T. (2025). Doubly robust uniform confidence bands group-time conditional average treatment effects difference--differences. arXiv preprint arXiv:2305.02185.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/catt_gt_continuous.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Uniform Inference for Group-Time Conditional Average Treatment Effects Given a Continuous Covariate ‚Äî catt_gt_continuous","text":"","code":"if (FALSE) { # \\dontrun{  data <- datageneration(   n = 500,   tau = 4 )  output <- catt_gt_continuous(   yname = \"Y\",   tname = \"period\",   idname = \"id\",   gname = \"G\",   zname = \"Z\",   xformla = ~ Z,   data = data,   zeval = seq(-1, 1, by = 0.1),   gteval = c(2, 2),   pretrend = FALSE,   control_group = \"notyettreated\",   anticipation = 0,   alp = 0.05,   bstrap = TRUE,   biters = 1000,   porder = 2,   kernel = \"gau\",   bwselect = \"IMSE1\",   bw = NULL,   uniformall = TRUE )  } # }"},{"path":"https://tkhdyanagi.github.io/didhetero/reference/datageneration.html","id":null,"dir":"Reference","previous_headings":"","what":"Data generating function ‚Äî datageneration","title":"Data generating function ‚Äî datageneration","text":"Data generating function","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/datageneration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data generating function ‚Äî datageneration","text":"","code":"datageneration(n, tau, HC = FALSE, dimX = 1, DGPY = 1, continuous = TRUE)"},{"path":"https://tkhdyanagi.github.io/didhetero/reference/datageneration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Data generating function ‚Äî datageneration","text":"n number cross-sectional units tau length time series tau > 2 HC Boolean whether consider heteroscedastic error terms. TRUE (resp. FALSE), heteroscedastic (resp. homoscedastic) error terms generated. Default FALSE. dimX dimension covariates X. positive integer. Default 1. DGPY data generating process treated potential outcome equations. Options 1 2. Default 1. continuous Boolean whether consider continuous covariate Z. TRUE (resp. FALSE), continuous (resp. discrete) covariate Z generated. Default TRUE.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/datageneration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Data generating function ‚Äî datageneration","text":"data.frame contains following elements. id unit index period time period index Y outcome G group Z scalar continuous covariate X covariates","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/reference/datageneration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data generating function ‚Äî datageneration","text":"","code":"set.seed(1) data <- datageneration(n = 500,                        tau = 4,                        HC = FALSE,                        dimX = 1,                        DGPY = 1,                        continuous = TRUE)"},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-018","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.8","title":"didhetero 0.1.8","text":"Fixed bug ‚Äúfunc_parametric.R‚Äù.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-017","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.7","title":"didhetero 0.1.7","text":"Added overview vignette.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-016","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.6","title":"didhetero 0.1.6","text":"Updated GitHub Pages.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-015","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.5","title":"didhetero 0.1.5","text":"Improved first-stage parametric estimation.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-014","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.4","title":"didhetero 0.1.4","text":"Updated GitHub Pages.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-013","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.3","title":"didhetero 0.1.3","text":"Updated GitHub Pages.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-012","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.2","title":"didhetero 0.1.2","text":"Added pretrend bwselect arguments catt_gt_continuous function. Changed default uniformall catt_gt_continuous function FALSE TRUE. Added aggte_continuous function. Removed catt_gt_discrete function. Improved many minor things.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-011","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.1","title":"didhetero 0.1.1","text":"Added GitHub Pages.","code":""},{"path":"https://tkhdyanagi.github.io/didhetero/news/index.html","id":"didhetero-010","dir":"Changelog","previous_headings":"","what":"didhetero 0.1.0","title":"didhetero 0.1.0","text":"First development version.","code":""}]
