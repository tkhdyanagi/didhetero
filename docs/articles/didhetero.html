<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with the didhetero Package • didhetero</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with the didhetero Package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">didhetero</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/didhetero.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/overview.html">Overview of the didhetero Methods</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with the didhetero Package</h1>
                        <h4 data-toc-skip class="author">Shunsuke Imai
(<a href="mailto:imai.shunsuke.57n@st.kyoto-u.ac.jp" class="email">imai.shunsuke.57n@st.kyoto-u.ac.jp</a>), Lei Qin (<a href="mailto:qinlei6d@unii.ac.jp" class="email">qinlei6d@unii.ac.jp</a>), Takahide Yanagi (<a href="mailto:yanagi@econ.kyoto-u.ac.jp" class="email">yanagi@econ.kyoto-u.ac.jp</a>)</h4>
            
      

      <div class="d-none name"><code>didhetero.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>didhetero</strong> package provides tools to construct
doubly robust uniform confidence bands for the group-time conditional
average treatment effect (CATT) function given a pre-treatment
continuous covariate of interest and a variety of useful summary
parameters in the staggered difference-in-differences (DiD) setup of
Callaway and Sant’Anna (2021).</p>
<p>This package is useful for understanding the heterogeneity in
treatment effects with respect to groups, periods, and covariate values
in the staggered DiD setting.</p>
<p>The uniform inference methods are developed by <a href="https://doi.org/10.48550/arXiv.2305.02185" class="external-link">Imai, Qin, and Yanagi
(2025) “Doubly Robust Uniform Confidence Bands for Group-Time
Conditional Average Treatment Effects in
Difference-in-Differences”</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Get the package from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools") # if needed</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"tkhdyanagi/didhetero"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="package-functions">Package Functions<a class="anchor" aria-label="anchor" href="#package-functions"></a>
</h2>
<p>The <strong>didhetero</strong> package provides the following
functions.</p>
<ul>
<li><p><code><a href="../reference/catt_gt_continuous.html">catt_gt_continuous()</a></code>: It computes the doubly robust
estimates and uniform confidence bands for the CATT function given a
continuous pre-treatment covariate of interest.</p></li>
<li><p><code><a href="../reference/aggte_continuous.html">aggte_continuous()</a></code>: It computes the doubly robust
estimates and uniform confidence bands for the summary parameters that
aggregate CATTs.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="the-catt_gt_continuous-function">The <code>catt_gt_continuous()</code> Function<a class="anchor" aria-label="anchor" href="#the-catt_gt_continuous-function"></a>
</h2>
<div class="section level4">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h4>
<p>The <code><a href="../reference/catt_gt_continuous.html">catt_gt_continuous()</a></code> function has the following
arguments.</p>
<ul>
<li>
<code>yname</code>: The name of the outcome.</li>
<li>
<code>tname</code>: The name of the time periods.</li>
<li>
<code>idname</code>: The name of the cross-sectional IDs.</li>
<li>
<code>gname</code>: The name of the groups. “G = 0” indicates the
never treated group.</li>
<li>
<code>zname</code>: The name of the scalar continuous covariate for
which the group-time conditional average treatment effects are
estimated</li>
<li>
<code>xformla</code>: A formula for the covariates to include in the
model. It should be of the form <code>~ X1 + X2</code>.
<code>xformla</code> should include <code>zname</code> as a
covariate.</li>
<li>
<code>data</code>: The name of data.frame that contains the balanced
panel data.</li>
<li>
<code>zeval</code>: The vector of the evaluation points z.</li>
<li>
<code>gteval</code>: The vector or matrix of the evaluation points g
and t. If it is a vector, the first and second elements indicate g and
t, respectively. If it is a matrix, the first and second columns
indicate g’s and t’s, respectively. Default is <code>NULL</code> and
gteval is constructed automatically.</li>
<li>
<code>pretrend</code>: Boolean for whether or not to perform the
uniform inference for CATT in the pre-treatment periods (i.e.,
pre-trends in our framework). This parameter is only applicable if
gteval is <code>NULL</code>. Default is <code>FALSE</code>.</li>
<li>
<code>control_group</code>: Which units to use the control group.
Options are “nevertreated” and “notyettreated”. Default is
“notyettreated”.</li>
<li>
<code>anticipation</code>: The number of time periods before
participating in the treatment where units can anticipate participating
in the treatment and therefore it can affect their untreated potential
outcomes. Default is 0.</li>
<li>
<code>alp</code>: The significance level. Default is 0.05.</li>
<li>
<code>bstrap</code>: Boolean for whether or not to perform weighted
bootstrapping. Default is <code>TRUE</code>. If bstrap is
<code>FALSE</code>, only the analytical critical value is used.</li>
<li>
<code>biters</code>: The number of bootstrap iterations. This
parameter is only applicable if <code>bstrap = TRUE</code>. Default is
1000.</li>
<li>
<code>porder</code>: The polynomial order used for the second- and
third-stage estimation. Options are 1 and 2, which correspond to the
local linear and quadratic regressions, respectively. Default is 2.</li>
<li>
<code>kernel</code>: The kernel function used for the local
polynomial regressions. Options are “gau” for the Gaussian kernel and
“epa” for the Epanechnikov kernel. Default is “gau”.</li>
<li>
<code>bwselect</code>: The bandwidth selection method used for the
second- and third-stage estimation. Options are “IMSE1”, “IMSE2”, “US1”,
and “manual”. “IMSE1” and “IMSE2” mean the IMSE-optimal bandwidths for
the local linear and quadratic regressions, respectively. “US1” means
the rule-of-thumb undersmoothing bandwidth for the local linear
regression. “manual” means the manual selection and bw should be
specified in this case. Default is “IMSE1”, which is recommended for use
with <code>porder = 2</code>.</li>
<li>
<code>bw</code>: The bandwidth used for the second- and third-stage
estimation. Default is <code>NULL</code> and the bandwidth is chosen
automatically. This parameter is only applicable if bwselect is
“manual”, and should be a scalar or a vector whose length equals to the
number of rows of gteval.</li>
<li>
<code>uniformall</code>: Boolean for whether or not to perform the
uniform inference over (g, t, z). Default is <code>TRUE</code>, and the
uniform inference over (g, t, z) is performed. If <code>FALSE</code>,
the uniform inference only over z is performed.</li>
</ul>
</div>
<div class="section level4">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a>
</h4>
<p>The <code><a href="../reference/catt_gt_continuous.html">catt_gt_continuous()</a></code> function returns a list that
contains the following elements.</p>
<ul>
<li>
<code>Estimate</code>: A data.frame that contains the following
elements.
<ul>
<li>
<code>g</code>: The group.</li>
<li>
<code>t</code>: The period.</li>
<li>
<code>z</code>: The covariate value.</li>
<li>
<code>est</code>: The doubly robust estimate for CATT.</li>
<li>
<code>se</code>: The standard error.</li>
<li>
<code>ci1_lower</code>: The lower bound of the analytical uniform
confidence band.</li>
<li>
<code>ci1_upper</code>: The upper bound of the analytical uniform
confidence band.</li>
<li>
<code>ci2_lower</code>: The lower bound of the bootstrap uniform
confidence band.</li>
<li>
<code>ci2_upper</code>: The upper bound of the bootstrap uniform
confidence band.</li>
<li>
<code>bw</code>: The bandwidth.</li>
</ul>
</li>
<li>
<code>Figure1</code>: A list that contains the ggplot elements for
the analytical uniform confidence bands.</li>
<li>
<code>Figure2</code>: A list that contains the ggplot elements for
the bootstrap uniform confidence bands.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="the-aggte_continuous-function">The <code>aggte_continuous()</code> function<a class="anchor" aria-label="anchor" href="#the-aggte_continuous-function"></a>
</h2>
<div class="section level4">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a>
</h4>
<p>The <code><a href="../reference/aggte_continuous.html">aggte_continuous()</a></code> function has the following
arguments.</p>
<ul>
<li>
<code>output</code>: The output of the
<code>catt_gt_continuous</code> function. In doing so, several arguments
and the uniform inference results for CATT from the
<code>catt_gt_continuous</code> function can be used in this function.
In particular, the following are passed down from output:
<code>xformla</code>, <code>zeval</code>, <code>pretrend</code>,
<code>control_group</code>, <code>anticipation</code>, <code>alp</code>,
and <code>kernel</code>.</li>
<li>
<code>type</code> Which type of the summary parameter is of
interest. Options are “simple”, “dynamic”, “group”, and “calendar”.
Default is “dynamic”.</li>
<li>
<code>eval</code>: The vector of the evaluation point specific to
the chosen summary parameter. If type is set to “dynamic”, it is the
evaluation point e. If type is set to “group”, it is the evaluation
point g’. If type is set to “calendar”, it is the evaluation point t’.
If type is set to “simple”, there is no evaluation point specific to
this summary parameter, and eval should be <code>NULL</code>. Default is
<code>NULL</code> and eval is constructed automatically.</li>
<li>
<code>bstrap</code>: Boolean for whether or not to perform
multiplier bootstrapping. Default is <code>TRUE</code>. If bstrap is
<code>FALSE</code>, only the analytical critical value is used.</li>
<li>
<code>biters</code>: The number of bootstrap iterations. This
parameter is only applicable if bstrap is <code>TRUE</code>. Default is
1000.</li>
<li>
<code>porder</code>: The polynomial order used for the second- and
third-stage estimation. Options are 1 and 2, which correspond to the
local linear and quadratic regressions, respectively. Default is 2.</li>
<li>
<code>bwselect</code>: The bandwidth selection method used for the
aggregation. Options are “IMSE1”, “IMSE2”, “US1”, and “manual”. “IMSE1”
and “IMSE2” mean the IMSE-optimal bandwidths for the local linear and
quadratic regressions, respectively. “US1” means the rule-of-thumb
undersmoothing for the local linear regression. “manual” means the
manual selection and bw should be specified in this case. Default is
“IMSE1”, which is recommended for use with <code>porder = 2</code>.</li>
<li>
<code>bw</code>: The bandwidth used for the aggregation. Default is
<code>NULL</code> and the bandwidth is chosen automatically. This
parameter is only applicable if bwselect is “manual”, and should be a
scalar or a vector whose length equals to the number of rows of
eval.</li>
<li>
<code>uniformall</code>: Boolean for whether or not to perform the
uniform inference over both eval and z. Default is <code>TRUE</code> and
the uniform inference over eval and z is performed. If
<code>FALSE</code>, the uniform inference only over z is performed.</li>
</ul>
</div>
<div class="section level4">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a>
</h4>
<p>The <code><a href="../reference/aggte_continuous.html">aggte_continuous()</a></code> function returns a list that
contains the following elements.</p>
<ul>
<li>
<code>Estimate</code>: A data.frame that contains the following
elements.
<ul>
<li>
<code>eval</code>: The evaluation point specific to the chosen
summary parameter.</li>
<li>
<code>z</code>: The covariate value.</li>
<li>
<code>est</code>: The doubly robust estimate of the chosen summary
parameter.</li>
<li>
<code>se</code>: The standard error.</li>
<li>
<code>ci1_lower</code>: The lower bound of the analytical uniform
confidence band.</li>
<li>
<code>ci1_upper</code>: The upper bound of the analytical uniform
confidence band.</li>
<li>
<code>ci2_lower</code>: The lower bound of the bootstrap uniform
confidence band.</li>
<li>
<code>ci2_upper</code>: The upper bound of the bootstrap uniform
confidence band.</li>
<li>bw: The bandwidth.</li>
</ul>
</li>
<li>
<code>Figure1</code>: A list that contains the ggplot elements for
the analytical uniform confidence bands.</li>
<li>
<code>Figure2</code>: A list that contains the ggplot elements for
the bootstrap uniform confidence bands.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>We begin by generating artificial data using the
<code><a href="../reference/datageneration.html">datageneration()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tkhdyanagi.github.io/didhetero/">didhetero</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate artificial data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datageneration.html">datageneration</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">500</span>, tau <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p>We can see the variables’ names in the dataset with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id period           Y G          Z</span></span>
<span><span class="co">#&gt; 1  1      1  0.98412124 2 -0.6264538</span></span>
<span><span class="co">#&gt; 2  1      2  1.77999550 2 -0.6264538</span></span>
<span><span class="co">#&gt; 3  1      3 -0.02004389 2 -0.6264538</span></span>
<span><span class="co">#&gt; 4  1      4  6.43951734 2 -0.6264538</span></span>
<span><span class="co">#&gt; 5  2      1  3.37331543 2  0.1836433</span></span>
<span><span class="co">#&gt; 6  2      2  5.59684221 2  0.1836433</span></span></code></pre></div>
<p>We can run the <code><a href="../reference/catt_gt_continuous.html">catt_gt_continuous()</a></code> function to compute
the doubly robust estimates and uniform confidence bands for the CATT
function given the continuous covariate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/catt_gt_continuous.html">catt_gt_continuous</a></span><span class="op">(</span></span>
<span>  yname <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>  tname <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>  idname <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  gname <span class="op">=</span> <span class="st">"G"</span>,</span>
<span>  zname <span class="op">=</span> <span class="st">"Z"</span>,</span>
<span>  xformla <span class="op">=</span> <span class="op">~</span> <span class="va">Z</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  zeval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  gteval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pretrend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  control_group <span class="op">=</span> <span class="st">"notyettreated"</span>,</span>
<span>  anticipation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  bstrap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  biters <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  porder <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  kernel <span class="op">=</span> <span class="st">"gau"</span>,</span>
<span>  bwselect <span class="op">=</span> <span class="st">"IMSE1"</span>,</span>
<span>  bw <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  uniformall <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The estimation and uniform inference results are:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">output1</span><span class="op">$</span><span class="va">Estimate</span><span class="op">)</span></span>
<span><span class="co">#&gt;   g t    z       est        se   ci1_lower ci1_upper  ci2_lower ci2_upper        bw</span></span>
<span><span class="co">#&gt; 1 2 2 -1.0 1.0264796 0.4222882 -0.09707295  2.150032 -0.9308918  2.983851 0.2547594</span></span>
<span><span class="co">#&gt; 2 2 2 -0.9 0.7652004 0.3980792 -0.29394090  1.824342 -1.0799584  2.610359 0.2547594</span></span>
<span><span class="co">#&gt; 3 2 2 -0.8 0.5273424 0.3785987 -0.47996845  1.534653 -1.2275212  2.282206 0.2547594</span></span>
<span><span class="co">#&gt; 4 2 2 -0.7 0.3192217 0.3636817 -0.64840072  1.286844 -1.3664996  2.004943 0.2547594</span></span>
<span><span class="co">#&gt; 5 2 2 -0.6 0.1813663 0.3498634 -0.74949043  1.112223 -1.4403045  1.803037 0.2547594</span></span>
<span><span class="co">#&gt; 6 2 2 -0.5 0.1441067 0.3353516 -0.74813968  1.036353 -1.4102999  1.698513 0.2547594</span></span></code></pre></div>
<p>The figure of the analytical uniform confidence band for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">g = 2</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">t = 2</annotation></semantics></math>
is:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output1</span><span class="op">$</span><span class="va">Figure1</span><span class="op">$</span><span class="va">g2_t2</span></span></code></pre></div>
<p><img src="unnamed-chunk-7-1.png"></p>
<p>The figure of the bootstrap uniform confidence band for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">g = 2</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">t = 2</annotation></semantics></math>
is:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output1</span><span class="op">$</span><span class="va">Figure2</span><span class="op">$</span><span class="va">g2_t2</span></span></code></pre></div>
<p><img src="unnamed-chunk-8-1.png"></p>
<p>We can run the <code><a href="../reference/aggte_continuous.html">aggte_continuous()</a></code> function to compute
the doubly robust estimates and uniform confidence bands for the
event-study-type parameter given the continuous covariate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aggte_continuous.html">aggte_continuous</a></span><span class="op">(</span></span>
<span>  output <span class="op">=</span> <span class="va">output1</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"dynamic"</span>,</span>
<span>  eval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bstrap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  biters <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  porder <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  bwselect <span class="op">=</span> <span class="st">"IMSE1"</span>,</span>
<span>  bw <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  uniformall <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The estimation and uniform inference results are:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">output2</span><span class="op">$</span><span class="va">Estimate</span><span class="op">)</span></span>
<span><span class="co">#&gt;   eval    z       est        se  ci1_lower ci1_upper   ci2_lower ci2_upper        bw</span></span>
<span><span class="co">#&gt; 1    0 -1.0 1.3522719 0.2938703  0.5590099  2.145534  0.47091346  2.233630 0.2296415</span></span>
<span><span class="co">#&gt; 2    0 -0.9 1.0763768 0.2923213  0.2872961  1.865457  0.19966408  1.953089 0.2296415</span></span>
<span><span class="co">#&gt; 3    0 -0.8 0.7894387 0.2849603  0.0202280  1.558649 -0.06519735  1.644075 0.2296415</span></span>
<span><span class="co">#&gt; 4    0 -0.7 0.5326729 0.2758289 -0.2118887  1.277235 -0.29457664  1.359922 0.2296415</span></span>
<span><span class="co">#&gt; 5    0 -0.6 0.3607236 0.2673598 -0.3609771  1.082424 -0.44112621  1.162573 0.2296415</span></span>
<span><span class="co">#&gt; 6    0 -0.5 0.3072095 0.2575102 -0.3879036  1.002323 -0.46510000  1.079519 0.2296415</span></span></code></pre></div>
<p>The figure of the analytical uniform confidence band for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">e = 0</annotation></semantics></math>
is:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output2</span><span class="op">$</span><span class="va">Figure1</span><span class="op">$</span><span class="va">eval0</span></span></code></pre></div>
<p><img src="unnamed-chunk-11-1.png"></p>
<p>The figure of the bootstrap Uuniform confidence band for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">e = 0</annotation></semantics></math>
is:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output2</span><span class="op">$</span><span class="va">Figure2</span><span class="op">$</span><span class="va">eval0</span></span></code></pre></div>
<p><img src="unnamed-chunk-12-1.png"></p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><p>Callaway, B., &amp; Sant’Anna, P. H. (2021).
Difference-in-differences with multiple time periods. Journal of
Econometrics, 225(2), 200-230. <a href="https://doi.org/10.1016/j.jeconom.2020.12.001" class="external-link">Link</a></p></li>
<li><p>Imai, S., Qin, L., &amp; Yanagi, T. (2025). Doubly Robust Uniform
Confidence Bands for Group-Time Conditional Average Treatment Effects in
Difference-in-Differences. arXiv preprint arXiv:2305.02185. <a href="https://doi.org/10.48550/arXiv.2305.02185" class="external-link">Link</a></p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shunsuke Imai, Lei Qin, Takahide Yanagi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
